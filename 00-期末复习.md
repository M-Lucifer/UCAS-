[ 典型例题_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1QD4y1t7LT/?spm_id_from=333.788&vd_source=5129c328bf55ce1aaf5ccbe326f46b06)
# 空域分析
## 八个灰度级的归一化直方图
### 直方图均衡化过程
假设我们有一个图像，其归一化直方图为以下 8 个灰度级（0 到 7）的分布：
[0.1, 0.25, 0.05, 0.26, 0.17, 0.08, 0.02, 0.07]
### 步骤 1: 计算累积分布函数（CDF）
累积分布函数（CDF）是每个灰度级的归一化直方图值累加到该灰度级的总和。具体计算如下：
- 对于灰度级 0: CDF = 0.1
- 对于灰度级 1: CDF = 0.1（灰度级 0） + 0.25 = 0.35
- 对于灰度级 2: CDF = 0.35（累积到灰度级 1） + 0.05 = 0.4
- 对于灰度级 3: CDF = 0.4（累积到灰度级 2） + 0.26 = 0.66
- 对于灰度级 4: CDF = 0.66（累积到灰度级 3） + 0.17 = 0.83
- 对于灰度级 5: CDF = 0.83（累积到灰度级 4） + 0.08 = 0.91
- 对于灰度级 6: CDF = 0.91（累积到灰度级 5） + 0.02 = 0.93
- 对于灰度级 7: CDF = 0.93（累积到灰度级 6） + 0.07 = 1.0
### 步骤 2: 计算均衡化后的灰度级
均衡化后的灰度级是通过将每个灰度级的 CDF 值乘以最大灰度级（在本例中为 7）并四舍五入到最近的整数来得到的。具体计算如下：
- 对于灰度级 0: 均衡化后的灰度级 = round (0.1 * 7) = 1
- 对于灰度级 1: 均衡化后的灰度级 = round (0.35 * 7) = 2
- 对于灰度级 2: 均衡化后的灰度级 = round (0.4 * 7) = 3
- 对于灰度级 3: 均衡化后的灰度级 = round (0.66 * 7) = 5
- 对于灰度级 4: 均衡化后的灰度级 = round (0.83 * 7) = 6
- 对于灰度级 5: 均衡化后的灰度级 = round (0.91 * 7) = 6
- 对于灰度级 6: 均衡化后的灰度级 = round (0.93 * 7) = 7
- 对于灰度级 7: 均衡化后的灰度级 = round (1.0 * 7) = 7
### 均衡化后的灰度级分布
在完成直方图均衡化之后，每个灰度级的分布如下所示。这些值是基于均衡化过程中计算得出的新灰度级。
| 均衡化后的灰度级 | 分布 |
|------------------|------|
| 1                | 0.1  |
| 2                | 0.25 |
| 3                | 0.05 |
| 5                | 0.26 |
| 6                | 0.25 |
| 7                | 0.09 |
这个表格展示了均衡化过程之后每个灰度级的新分布。注意，由于原始图像的直方图被重新分配，一些灰度级（如 4）在均衡化后的直方图中可能不再出现，而其他灰度级（如 6）的分布可能增加。
## 卷积
### 向量卷积
- 向量卷积是两个向量结合生成第三个向量的过程，其中一个关键步骤是对其中一个向量进行翻转。设有两个向量 A 和 B，长度分别为 n 和 m。
	- A = [a 1, a 2, a 3, ..., an]
	- B = [b 1, b 2, b 3, ..., bm]
-  向量卷积的结果是一个长度为 L = n + m - 1 的新向量 C。
#### 卷积步骤
1. **翻转其中一个向量**：通常我们翻转向量 B，使其变为 [bm, ..., b 3, b 2, b 1]。
2. **滑动和乘加**：将翻转后的向量 B 滑动到向量 A 上方，并对每个重叠位置的元素进行乘法运算后求和，具体过程如下：
   - 首先将 B 的第一个元素与 A 的第一个元素对齐，计算它们的乘积并求和。
   - 然后滑动 B，使其第二个元素与 A 的第一个元素对齐，重复乘法运算和求和，直至 B 的最后一个元素与 A 的最后一个元素对齐。
3. **累加结果**：对于每个滑动位置，将所有对应的乘积累加起来，形成卷积结果向量 C 的一个元素。
#### 示例
例如，如果 A = [a 1, a 2, a 3] 和 B = [b 1, b 2]，卷积过程如下（其中 B 被翻转为 [b 2, b 1]）：
- C[1] = a 1 * b 2
- C[2] = a 1 * b 1 + a 2 * b 2
- C[3] = a 2 * b 1 + a 3 * b 2
- C[4] = a 3 * b 1
最终，卷积结果 C 为一个长度为 4 的新向量。
### 矩阵卷积
#### 矩阵卷积过程（包含填充）
在矩阵卷积中，填充通常用于保持输出矩阵的维度。这在图像处理和深度学习中尤为重要。设有两个矩阵 A（图像）和 B（卷积核）。
A（原始 3 x 3 矩阵）:
| a 11 | a 12 | a 13 |
|-----|-----|-----|
| a 21 | a 22 | a 23 |
| a 31 | a 32 | a 33 |
B（2 x 2 卷积核）:
| b 11 | b 12 |
|-----|-----|
| b 21 | b 22 |
#### 填充步骤
1. **对矩阵 A 进行填充**：在矩阵 A 的周围填充 0，使其大小增加。填充的数量取决于卷积核 B 的大小。在这个例子中，我们对 A 的每边添加一层 0。
   填充后的 A（5 x 5 矩阵）:
   | 0  | 0  | 0  | 0  | 0  |
   |----|----|----|----|----|
   | 0  | a 11| a 12| a 13| 0  |
   | 0  | a 21| a 22| a 23| 0  |
   | 0  | a 31| a 32| a 33| 0  |
   | 0  | 0  | 0  | 0  | 0  |
#### 卷积步骤
2. **初始化输出矩阵 C**：创建一个新的矩阵 C。由于填充，C 的大小将与原始矩阵 A 相同（3 x 3）。
3. **进行卷积计算**：将卷积核 B 在填充后的矩阵 A 上滑动，对每个重叠的子矩阵执行加权和计算。
4. **重复直至完成**：继续滑动卷积核 B，直到覆盖填充后的矩阵 A 的所有可能位置。
#### 输出
最终，卷积结果 C 是一个与原始矩阵 A 相同大小的新矩阵。


## 拉普拉斯算子
### 拉普拉斯算子定义
#### 数学定义

在数学上，拉普拉斯算子定义为一个函数对所有空间坐标的二次偏导数之和。
$$
\nabla^2 f = \frac{\partial^2 f}{\partial x^2} + \frac{\partial^2 f}{\partial y^2}
$$
#### 在图像处理中的应用
在图像处理中，拉普拉斯算子用于增强图像中的高频部分，如边缘和其他突变区域。它的应用包括：
1. **边缘检测**：拉普拉斯算子可以突出图像中的快速强度变化区域，即边缘。
2. **图像锐化**：将拉普拉斯算子的输出与原始图像叠加，可以增强图像的对比度，使图像看起来更清晰。$g (x, y)= f(x, y)-\nabla^2 f(x, y)$
#### 拉普拉斯滤波器
在离散域（如数字图像处理），拉普拉斯算子通常通过卷积核（滤波器）实现。一个常见的拉普拉斯滤波器核为：
$$
\begin{bmatrix}
0 & 1 & 0 \\
1 & -4 & 1 \\
0 & 1 & 0
\end{bmatrix}
$$
### 利用拉普拉斯算子进行图像增强
1. **应用拉普拉斯算子**：首先对原始图像 $f(x, y)$ 应用拉普拉斯算子，得到拉普拉斯图像 $\nabla^2 f$。
2. **增强原始图像**：将拉普拉斯图像与原始图像结合，以增强图像的边缘：
   $$
   f_{\text{enhanced}}(x, y) = f(x, y) + c \cdot \nabla^2 f
   $$
   其中 $c$ 是用于控制增强程度的放大因子。
#### 注意事项
- 选择合适的放大因子 $c$ 非常重要，以避免过度增强和噪声放大。
- 拉普拉斯算子会增强图像的高频部分，可能同时增强图像中的噪声，有时需要先对图像进行平滑处理。
- 拉普拉斯增强特别适用于强调图像中的细节和边缘，但在噪声较多的图像中应谨慎使用。
### 拉普拉斯算子旋转不变性
拉普拉斯算子在二维空间中对一个函数$f (x, y)$的定义是：
$$
\nabla^2 f = \frac{\partial^2 f}{\partial x^2} + \frac{\partial^2 f}{\partial y^2}
$$
当我们对函数应用旋转变换时，新坐标$(x', y')$可以通过旋转矩阵与原始坐标$(x, y)$相关联：
$$
\begin{align*}
x' &= x \cos(\theta) - y \sin(\theta) \\
y' &= x \sin(\theta) + y \cos(\theta)
\end{align*}
$$
为了证明拉普拉斯算子的旋转不变性，我们计算变换后的二阶偏导数并展开：
$$
\begin{align*}
\nabla^2 f &= \frac{\partial}{\partial x'}\left(\frac{\partial f}{\partial x'}\right) + \frac{\partial}{\partial y'}\left(\frac{\partial f}{\partial y'}\right) \\
&= \frac{\partial}{\partial x'}\left(\frac{\partial f}{\partial x} \frac{\partial x}{\partial x'} + \frac{\partial f}{\partial y} \frac{\partial y}{\partial x'}\right) + \frac{\partial}{\partial y'}\left(\frac{\partial f}{\partial x} \frac{\partial x}{\partial y'} + \frac{\partial f}{\partial y} \frac{\partial y}{\partial y'}\right) \\
&= \frac{\partial}{\partial x'}\left(\frac{\partial f}{\partial x} \cos(\theta) + \frac{\partial f}{\partial y} (-\sin(\theta))\right) + \frac{\partial}{\partial y'}\left(\frac{\partial f}{\partial x} \sin(\theta) + \frac{\partial f}{\partial y} \cos(\theta)\right) \\
&= \frac{\partial}{\partial x'}\left(\frac{\partial f}{\partial x} \cos(\theta) - \frac{\partial f}{\partial y} \sin(\theta)\right) + \frac{\partial}{\partial y'}\left(\frac{\partial f}{\partial x} \sin(\theta) + \frac{\partial f}{\partial y} \cos(\theta)\right) \\
&= \frac{\partial}{\partial x}\left(\frac{\partial f}{\partial x}\right) \cos^2(\theta) + \frac{\partial}{\partial x}\left(\frac{\partial f}{\partial y}\right) (-\sin(\theta) \cos(\theta)) \\
&\quad + \frac{\partial}{\partial y}\left(\frac{\partial f}{\partial x}\right) (-\sin(\theta) \cos(\theta)) + \frac{\partial}{\partial y}\left(\frac{\partial f}{\partial y}\right) \sin^2(\theta) \\
&\quad + \frac{\partial}{\partial x}\left(\frac{\partial f}{\partial x}\right) \sin^2(\theta) + \frac{\partial}{\partial x}\left(\frac{\partial f}{\partial y}\right) (\sin(\theta) \cos(\theta)) \\
&\quad + \frac{\partial}{\partial y}\left(\frac{\partial f}{\partial x}\right) (\sin(\theta) \cos(\theta)) + \frac{\partial}{\partial y}\left(\frac{\partial f}{\partial y}\right) \cos^2(\theta) \\
&= \left( \frac{\partial^2 f}{\partial x^2} \cos^2(\theta) + 2 \frac{\partial^2 f}{\partial x \partial y} (-\sin(\theta) \cos(\theta)) + \frac{\partial^2 f}{\partial y^2} \sin^2(\theta) \right) \\
&\quad + \left( \frac{\partial^2 f}{\partial x^2} \sin^2(\theta) + 2 \frac{\partial^2 f}{\partial x \partial y} (\sin(\theta) \cos(\theta)) + \frac{\partial^2 f}{\partial y^2} \cos^2(\theta) \right) \\
&= \frac{\partial^2 f}{\partial x^2} (\cos^2(\theta) + \sin^2(\theta)) + \frac{\partial^2 f}{\partial y^2} (\sin^2(\theta) + \cos^2(\theta)) \\
&= \frac{\partial^2 f}{\partial x^2} + \frac{\partial^2 f}{\partial y^2} \\
&= \nabla^2 f
\end{align*}
$$
## 线性移不变系统
线性时不变系统（Linear Time-Invariant system，简称 LTI 系统）在控制理论和信号处理中是一个核心概念，其定义基于两个主要属性：线性和时不变性。
### 线性（Linearity）
一个系统是线性的，如果它满足以下叠加原理：
对于任意输入信号 x_1(t) 和$x_2(t)$，以及任意常数$a$和$b$，系统的响应满足：
- $H(a x_1(t) + b x_2(t)) = a H(x_1(t)) + b H(x_2(t))$
- 其中$H$表示系统的响应操作。
### 时不变性（Time Invariance）
一个系统是时不变的，如果它的输出不依赖于时间的平移。即对于任意时间延迟$\tau$，系统对延迟输入的响应等于延迟后的输出：
- $H(x(t - \tau)) = y(t - \tau)$
- 其中$x(t)$是输入信号，y(t) 是系统对原始输入$x(t)$的响应。


## 空域变换方法：$g(x,y)=T(f(x,y)$
### 幂律变换（伽马校正）
幂律变换是图像处理中常用的一种非线性变换，用于调整图像的亮度和对比度。
#### 数学表达式
幂律变换的数学表达式为：
$$
I_{\text{out}}(x, y) = c \cdot I_{\text{in}}(x, y)^\gamma
$$
其中：
- $I_{\text{in}}(x, y)$ 是输入图像在位置 $(x, y)$ 的像素值。
- $I_{\text{out}}(x, y)$ 是输出图像在位置 $(x, y)$ 的像素值。
- $c$ 是常数，用于缩放输出的像素值。
- $\gamma$ 是伽马值，用于控制变换的形状。
#### 应用场景
- **暗区域增强**：当 $\gamma < 1$ 时，幂律变换增强暗区域细节，使图像整体看起来更亮，但是会损失亮部细节。
- **亮区域增强**：当 $\gamma > 1$ 时，变换增强亮区域细节，使图像整体看起来更暗，但是会损失暗部细节。
### 对数变换
对数变换是一种在图像处理中常用的点操作技术，特别适用于增强图像的低灰度区域，从而改善整体的视觉效果。
#### 数学表达式
对数变换的数学表达式为：
$$
I_{\text{out}}(x, y) = c \cdot \log(1 + I_{\text{in}}(x, y))
$$
其中：
- $I_{\text{in}}(x, y)$ 是输入图像在位置 $(x, y)$ 的像素值。
- $I_{\text{out}}(x, y)$ 是输出图像在位置 $(x, y)$ 的像素值。
- $c$ 是缩放常数，用于调整变换的效果。
- $\log$ 表示自然对数函数。
#### 应用场景
- **增强暗区域**：对数变换能够扩展图像的暗区域，同时压缩亮区域的范围。这对于增强图像中的暗部细节非常有效。
- **动态范围压缩**：对数变换能够将图像的宽动态范围压缩到较小的动态范围内，这对于显示或分析具有大范围亮度变化的图像特别有用。
### 对比拉伸变换
对比拉伸变换是一种用于增强图像对比度的非线性变换方法。它特别适用于在图像的亮度值在较窄范围内聚集时增加对比度。
#### 数学表达式

对比拉伸变换可以用以下公式表示：
$$
s = T(r) = \frac{1}{1 + \left(\frac{m}{r}\right)^E}
$$
其中：
- $s$ 是变换后的像素值。
- $r$ 是原始图像的像素值。
- $m$ 是图像中的一个常数，通常取为图像像素值的中值或平均值。
- $E$ 是一个正的实数，控制变换的弯曲程度，从而影响对比度拉伸的非线性程度。
#### 变换特性
- 当 $r$ 接近 $m$ 时，对比度增强效果最明显。
- 参数 $E$ 决定了对比度拉伸的强度。较小的 $E$ 值会导致更强烈的对比度增强。
- 该变换特别适用于增强那些亮度值集中在较窄动态范围内的图像。
#### 应用场景
- **图像增强**：在需要改善图像的整体视觉质量时，尤其是亮度级别比较集中的情况。
- **动态范围调整**：当图像的动态范围较小，使得细节难以辨识时，对比拉伸变换可以提高细节的可见性。

### 直方图均衡
直方图均衡是图像处理领域中一种用于增强图像对比度的技术，通过调整图像的直方图来实现。
#### 数学表达式
直方图均衡涉及计算图像的累积分布函数（CDF），并应用该函数来映射图像的灰度级。累积分布函数$CDF$ 的计算公式为：
$$
CDF(v) = \sum_{j=0}^{v} p(j)
$$

其中 $v$ 是图像的灰度级，$p (j)$ 是灰度级 $j$ 在直方图中的概率。然后，直方图均衡化后的像素值 $s$ 可以通过以下公式得到：

$$
s = T(r) = \text{round}\left(CDF(r) \times (\text{number of gray levels} - 1)\right)
$$
#### 变换特性
- 直方图均衡化旨在使得图像的直方图分布均匀，增加图像的全局对比度。
- 这种方法尤其适用于背景和前景的亮度都比较接近的图像。
#### 应用场景
- **对比度增强**：直方图均衡化通常用于提高图像的对比度，尤其是在低对比度的情况下。
- **图像预处理**：在更复杂的图像处理操作之前，如特征提取和边缘检测，先进行直方图均衡化。
#### 注意事项
- 直方图均衡化可能会导致某些区域出现过增强的效果，尤其是在噪声较多的图像中。
- 对于具有广泛亮度分布的图像，均衡化可能会产生不自然的效果，有时可能需要自适应的方法来优化结果。
#### 不能绝对平坦的原因
- 离散累计映射并不能保证该映射是单调递增的，只能保证是单调不减的
- 累计映射的输出值需要转化成整型的灰度级，转化的过程中出现多对一的关系，这是造成输出直方图不平坦的重要原因
- 图像的像素值是离散的，并且不可能均匀分布在所有灰度级上。
- 像素值的数量是有限的，直方图均衡化不会创建新的像素值，而是重新分配现有的像素值。
- 直方图均衡化是一种全局处理方法，它不考虑图像中局部特征的分布
- 直方图均衡化不会创建新的像素值，而是重新分配现有的像素值。这种重新分配基于原始直方图的累积分布函数，可能导致某些像素值更加集中，而不是完全均匀。
#### 直方图均衡化不会随着次数增加而变得更优的原因
- **非累积性**： 一旦图像经过一次直方图均衡化，其直方图的分布就会被修改。重复应用直方图均衡化不会使直方图变得更加均匀，反而可能导致某些灰度级过度集中。 
- **信息损失**： 每次进行直方图均衡化时，都可能导致信息的损失。重复均衡化可能会增加这种损失，尤其是在较暗或较亮区域。 
- **最优化的局限性**： 直方图均衡化是基于提供最优化对比度的想法，但这种最优化是有限的。在达到某个点之后，对比度的提升不再显著，甚至可能会导致图像质量的下降。

### 直方图匹配
直方图均衡的特殊形式，输出的直方图具有指定的形状
## 卷积性质
卷积是信号和图像处理中的一项基本操作，具有多种重要性质，以下是几个关键性质：
#### 交换律 (Commutativity)
$$
f(t) * g(t) = g(t) * f(t)
$$
#### 结合律 (Associativity)
$$
f(t) * (g(t) * h(t)) = (f(t) * g(t)) * h(t)
$$
#### 分配律 (Distributivity)
$$
f(t) * (g(t) + h(t)) = f(t) * g(t) + f(t) * h(t)
$$
卷积对于加法是可分配的，这意味着一个函数与另外两个函数的和卷积等于它与这两个函数分别卷积的和。
#### 恒等律 (Identity)
存在一个函数 $\delta (t)$，称为冲激函数或狄拉克δ函数，使得
$$
f(t) * \delta(t) = f(t)
$$
卷积一个函数和冲激函数等于原函数。
#### 微分性质
$$
\frac{d}{dt} (f(t) * g(t)) = f(t) * \frac{d}{dt}g(t) = \frac{d}{dt}f(t) * g(t)
$$
函数的卷积的导数等于一个函数与另一个函数导数的卷积。
#### 积分性质
$$
\int_{-\infty}^{\infty} (f(t) * g(t)) \, dt = \left( \int_{-\infty}^{\infty} f(t) \, dt \right) \left( \int_{-\infty}^{\infty} g(t) \, dt \right)
$$
函数的卷积的积分等于这些函数各自积分的乘积。
## 梯度
### 梯度的描述
梯度是多变量函数在每一点上的方向导数沿着最大上升方向的矢量。在图像处理中，梯度常用于边缘检测，因为边缘可以看作是图像亮度函数的快速变化区域。
#### 数学定义
对于函数 \( f (x, y) \)，其梯度定义为：
$$
\nabla f = \left( \frac{\partial f}{\partial x}, \frac{\partial f}{\partial y} \right)
$$
这表示梯度是一个矢量，其各个分量是函数相对于每个变量的偏导数。
#### 梯度的方向和大小
- **方向**：梯度的方向指向函数增长最快的方向。
- **大小**：梯度的大小（或模）给出了函数在该方向上增长的速率。
$$
|\nabla f| = \sqrt{\left(\frac{\partial f}{\partial x}\right)^2 + \left(\frac{\partial f}{\partial y}\right)^2}
$$



### Sobel 算子
Sobel 算子是图像处理中常用的一种边缘检测算子。它用于计算图像亮度函数的近似梯度，从而突出图像中的边缘区域。
#### 数学表达式
Sobel 算子包括两个矩阵核，分别用于水平和垂直方向上的边缘检测：
- **水平 Sobel 核**（用于检测垂直边缘）：
  $$
  G_x = \begin{bmatrix}
  -1 & 0 & 1 \\
  -2 & 0 & 2 \\
  -1 & 0 & 1
  \end{bmatrix}
  $$
- **垂直 Sobel 核**（用于检测水平边缘）：
  $$
  G_y = \begin{bmatrix}
  -1 & -2 & -1 \\
  0 & 0 & 0 \\
  1 & 2 & 1
  \end{bmatrix}
  $$
#### 边缘检测过程
使用 Sobel 算子进行边缘检测的基本步骤包括：
1. **应用 Sobel 核**：分别将水平和垂直 Sobel 核应用于图像 $f(x, y)$，以计算图像在每个方向上的梯度近似：
   $$
   G_x(x, y) = (G_x * f)(x, y) \quad \text{和} \quad G_y(x, y) = (G_y * f)(x, y)
   $$
2. **计算边缘强度**：结合两个方向的梯度近似来计算边缘强度：
   $$
   |\nabla f| = \sqrt{G_x(x, y)^2 + G_y(x, y)^2}
   $$
3. **边缘方向**：可以通过计算梯度的方向来得到边缘的方向：
   $$
   \Theta(x, y) = \arctan\left(\frac{G_y(x, y)}{G_x(x, y)}\right)
   $$
#### 应用场景
- **边缘检测**：Sobel 算子是一种简单高效的边缘检测工具，特别适用于强调和识别图像中的结构边界。
- **图像分割**：在图像处理和计算机视觉中，边缘检测是图像分割的重要步骤之一。
#### 注意事项
- Sobel 算子对噪声较为敏感，因此在噪声较多的图像上可能需要预先进行平滑处理。
- Sobel 算子能够较好地响应边缘的变化，但在处理较细的边缘或更复杂的图像结构时可能需要更先进的算法。
# 小波变换
## Z 变换: $X(z) = \mathcal{Z}\{x(n)\} = \sum_{n=-\infty}^{\infty} x(n)z^{-n}$
### 性质 1:若 $x (n)$的 Z 变换为 $X (z)$，则 $(-1)^n \cdot x (n)$的 Z 变换为 $X (-z)$。
#### 证明
根据 Z 变换的定义，我们有：
$$
X(z) = \mathcal{Z}\{x(n)\} = \sum_{n=-\infty}^{\infty} x(n)z^{-n}
$$
对于$(-1)^n \cdot x (n)$，其 Z 变换为：
$$
\mathcal{Z}\{(-1)^n \cdot x(n)\} = \sum_{n=-\infty}^{\infty} (-1)^n \cdot x(n) \cdot z^{-n}
$$
由于$(-1)^n$可以被视为$(-z/z)^n$，因此：
$$
\mathcal{Z}\{(-1)^n \cdot x(n)\} = \sum_{n=-\infty}^{\infty} x(n) \cdot (-z)^{-n} = X(-z)
$$
### 性质 2: 若 $x (n)$的 Z 变换为 $X (z)$，则 $x (-n)$的 Z 变换为 $X (1/z)$。
#### 证明
对$x (-n)$应用 Z 变换的定义，我们得到：
$$
\mathcal{Z}\{x(-n)\} = \sum_{n=-\infty}^{\infty} x(-n) \cdot z^{-n}
$$
改变求和指标的符号$m = -n$，则$n = -m$和$dn = -dm$，我们得到：
$$
\mathcal{Z}\{x(-n)\} = \sum_{m=-\infty}^{\infty} x(m) \cdot z^{m}
$$
由于$z^{m}$是$z^{-m}$的倒数，即$(1/z)^{-m}$，我们可以写出：
$$
\mathcal{Z}\{x(-n)\} = \sum_{m=-\infty}^{\infty} x(m) \cdot (1/z)^{-m} = X(1/z)
$$
### 2 倍下采样信号的 Z 变换推导
给定一个离散时间信号$x (n)$和其 Z 变换$X (z)$。我们考虑对$x (n)$进行 2 倍下采样，即$y (n) = x (2 n)$。我们的目标是找到$y (n)$的 Z 变换$Y (z)$。
#### 原始信号的 Z 变换
原始信号$x (n)$的 Z 变换定义为：
$$
X(z) = \sum_{n=-\infty}^{\infty} x(n) z^{-n}
$$
#### 2 倍下采样信号的 Z 变换

对于 2 倍下采样的信号$y (n) = x (2 n)$，其 Z 变换为：

$$
Y(z) = \sum_{n=-\infty}^{\infty} y(n) z^{-n} = \sum_{n=-\infty}^{\infty} x(2n) z^{-n}
$$

我们将求和中的项分为偶数和奇数两部分：

1. **偶数索引**：对于偶数索引，设$n = 2 k$（其中$k$是整数），我们得到：
   $$
   Y_{\text{even}}(z) = \sum_{k=-\infty}^{\infty} x(2k) z^{-2k}
   $$
   使用$z^{-2 k} = (z^{1/2})^{-2 k}$，表达式变为：
   $$
   Y_{\text{even}}(z) = \sum_{k=-\infty}^{\infty} x(2k) (z^{1/2})^{-2k}
   $$
2. **奇数索引**：对于奇数索引，设$n = 2 k+1$（其中$k$是整数），我们得到：
   $$
   Y_{\text{odd}}(z) = \sum_{k=-\infty}^{\infty} x(2k+1) z^{-(2k+1)}
   $$
   使用$z^{-(2 k+1)} = (-z^{1/2})^{-2 k}$，表达式变为：
$$
   Y_{\text{odd}}(z) = \sum_{k=-\infty}^{\infty} x(2k+1) (-z^{1/2})^{-2k}
   $$
结合这两个部分，我们得到$Y (z)$：
$$
Y(z) = \frac{1}{2} \left( \sum_{k=-\infty}^{\infty} x(2k) (z^{1/2})^{-2k} + \sum_{k=-\infty}^{\infty} x(2k+1) (-z^{1/2})^{-2k} \right)
$$
由于这两个和式分别对应于原始信号$x (n)$在偶数和奇数索引的 Z 变换，我们可以将它们重写为$X (z^{1/2})$和$X (-z^{1/2})$：
$$
Y(z) = \frac{1}{2} \left( X(z^{1/2}) + X(-z^{1/2}) \right)
$$
因此，2 倍下采样后的信号$y (n)$的 Z 变换是原始信号的 Z 变换在$z^{1/2}$和$-z^{1/2}$处的平均值。这个结果说明了 2 倍下采样如何将原始信号的频谱在 Z 域中折叠和重组。

## 多分辨率分析（MRA）中尺度函数的四个基本要求
#### 1. 尺度函数对它的整数平移对应的函数是正交的

#### 2. 低尺度尺度函数张成的子空间包含于高尺度尺度函数张成的子空间内
$$
V_j \subset V_{j+1}
$$
#### 3. 唯一包含在所有 V，中的函数是 f (x)= 0。$V_{-\infty}=0$
$$
\bigcap_{j} V_j = \{0\}
$$
#### 4. 任何函数都可以以任意精度表示。
$$
V_{\infty}=L^2 (\mathbb{R})
$$
## 完美重建滤波器
给定小波理论中的四个滤波器
1.$g_1 (n) = (-1)^n g_0 (2 K-1-n)$
2.$h_0 (n) = g_0 (2 K-1-n)$
3.$h_1 (n) = g_1 (2 K-1-n)$
我们的目标是推导出$h_1 (n)$ 和$h_0 (n)$ 之间的关系：
由关系 1 和关系 3，
$$
h_1(n) = g_1(2K-1-n) = (-1)^{2K-1-n} g_0(n)
$$
结合关系 2，$h_0 (n) = g_0 (2 K-1-n)$，我们得到：
$$
h_1(n) = (-1)^{2K-1-n} h_0(2K-1-n)
$$
这表明 $h_1 (n)$ 与 $h_0 (n)$ 之间的关系涉及一个额外的系数和时间翻转及平移操作。

$$
h_1(n) = (-1)^{n+1} h_0(n)
$$
## 图像金字塔
[B站解释：图像金字塔](https://www.bilibili.com/video/BV1L84y1e7Ky/?spm_id_from=333.337.search-card.all.click&vd_source=5129c328bf55ce1aaf5ccbe326f46b06)
- 图像金字塔：
	- 以多个分辨率来表示图像的结构，
	- 底部为高分辨率，顶部为低分辨率近似
- 高斯金字塔：
	- 通过高斯滤波模糊和下采样不断将图像尺寸缩小，
	- 从而在金字塔中包含多分辨率的一组图像
- 拉普拉斯金字塔：
	- 由高斯金字塔生成，某级拉普拉斯金字塔反映同级拉普拉斯金字塔的高频分量；
	- 拉普拉斯金字塔是高斯金字塔某层与其上一层通过上采样扩大后的图像的差值
- ![[image-20240102113153790.png]]


## 哈尔矩阵
哈尔矩阵是一种正交矩阵，用于小波变换中。下面是二阶、四阶和八阶哈尔矩阵的标准形式。

$$
H_2 = \frac{1}{\sqrt{2}}
\begin{bmatrix}
1 & 1 \\
1 & -1
\end{bmatrix}
$$

$$
H_4 = \frac{1}{2}
\begin{bmatrix}
1 & 1 & 1 & 1 \\
1 & 1 & -1 & -1 \\
\sqrt{2} & -\sqrt{2} & 0 & 0 \\
0 & 0 & \sqrt{2} & -\sqrt{2}
\end{bmatrix}
$$

$$
H_8 = \frac{1}{2\sqrt{2}}
\begin{bmatrix}
1 & 1 & 1 & 1 & 1 & 1 & 1 & 1 \\
1 & 1 & 1 & 1 & -1 & -1 & -1 & -1 \\
\sqrt{2} & \sqrt{2} & -\sqrt{2} & -\sqrt{2} & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & \sqrt{2} & \sqrt{2} & -\sqrt{2} & -\sqrt{2} \\
2 & -2 & 0 & 0 & 0 & 0 & 0 & 0 \\
0 & 0 & 2 & -2 & 0 & 0 & 0 & 0 \\
0 & 0 & 0 & 0 & 2 & -2 & 0 & 0 \\
0 & 0 & 0 & 0 & 0 & 0 & 2 & -2
\end{bmatrix}
$$

## 快速小波分解和重建
### 分解例题
$W_\varphi(3,n)=f(n)=[1,-3,3,1,2,0,-2,1]$
- 1.1 卷积 $[-\frac{1}{\sqrt2},\frac{1}{\sqrt2}]$，下采样
	- 1.1.1 卷积运算：$[-\frac{1}{\sqrt2},\frac{1}{\sqrt2}]*[1,-3,3,1,2,0,-2,1]$
	- 1.1.2 运算结果：$\frac{1}{\sqrt2}\bullet[-1,4,-6,2,-1,2,2,-3,1]$
	- 1.1.3 下采样（取偶数位）：$W_\psi(2,n)=\frac{1}{\sqrt2}\bullet[4,2,2,-3]$
- 1.2 卷积 $[\frac{1}{\sqrt2},\frac{1}{\sqrt2}]$，下采样
	- 1.2.1 卷积运算：$[\frac{1}{\sqrt2},\frac{1}{\sqrt2}]*[1,-3,3,1,2,0,-2,1]$
	- 1.2.2 运算结果：$\frac{1}{\sqrt2}\bullet[1,-2,0,4,3,2,-2,-1,1]$
	- 1.2.3 下采样（取偶数位）：$W_\varphi(2,n)=\frac{1}{\sqrt2}\bullet[-2,4,2,-1]$
- 2.1 $W_\varphi(2,n)=\frac{1}{\sqrt2}\bullet[-2,4,2,-1]$，卷积 $[-\frac{1}{\sqrt2},\frac{1}{\sqrt2}]$，下采样
	- 2.1.1 卷积运算：$[-\frac{1}{\sqrt2},\frac{1}{\sqrt2}]*[\frac{1}{\sqrt2}\bullet[-2,4,2,-1]]$
	- 2.1.2 运算结果：$[1,-3,1,\frac{3}{2},-\frac{1}{2}]$
	- 1.1.3 下采样（取偶数位）：$W_\psi(1,n)=[-3,\frac{3}{2}]$
- 2.2 $W_\varphi(2,n)=\frac{1}{\sqrt2}\bullet[-2,4,2,-1]$， 卷积 $[\frac{1}{\sqrt2},\frac{1}{\sqrt2}]$，下采样
	- 2.2.1 卷积运算：$[\frac{1}{\sqrt2},\frac{1}{\sqrt2}]*[\frac{1}{\sqrt2}\bullet[-2,4,2,-1]]$
	- 2.2.2 运算结果：$[-1,1,3,\frac{1}{2},-\frac{1}{2}]$
	- 2.2.3 下采样（取偶数位）：$W_\varphi(1,n)=[1,\frac{1}{2}]$
- 3.1 $W_\varphi(1,n)=[1,\frac{1}{2}]$，卷积 $[-\frac{1}{\sqrt2},\frac{1}{\sqrt2}]$，下采样
	- 3.1.1 卷积运算：$[-\frac{1}{\sqrt2},\frac{1}{\sqrt2}]*[1，\frac{1}{2}]$
	- 3.1.2 运算结果：$\frac{1}{\sqrt2}\bullet[-1,\frac{1}{2},\frac{1}{2}]$
	- 3.1.3 下采样（取偶数位）：$W_\psi(0,n)=\frac{1}{2\sqrt2}$
- 3.2 $W_\varphi(1,n)=[1,\frac{1}{2}]$，卷积 $[\frac{1}{\sqrt2},\frac{1}{\sqrt2}]$，下采样
	- 3.2.1 卷积运算：$[\frac{1}{\sqrt2},\frac{1}{\sqrt2}]*[1,\frac{1}{2}]$
	- 3.2.2 运算结果：$\frac{1}{\sqrt2}\bullet[1,\frac{3}{2},\frac{1}{2}]$
	- 3.2.3 下采样（取偶数位）：$W_\varphi(0,n)=\frac{3}{2\sqrt2}$
### 重建例题
- 1.1 $W_\psi(1,0)=[1]$，上采样，卷积 $[\frac{1}{\sqrt2},-\frac{1}{\sqrt2}]$
	- 1.1.1 上采样（偶数位补零）：$[1,0]$
	- 1.1.2 卷积运算：$[\frac{1}{\sqrt2},-\frac{1}{\sqrt2}]*[1,0]$
	- 1.1.3 运算结果：$\frac{1}{\sqrt2}\bullet[1,-1,0]$
- 1.2 $W_\varphi(1,0)=[1]$，上采样，卷积 $[\frac{1}{\sqrt2},\frac{1}{\sqrt2}]$
	- 1.2.1 上采样（偶数位补零）：$[1,0]$
	- 1.2.2 卷积运算：$[\frac{1}{\sqrt2},\frac{1}{\sqrt2}]*[1,0]$
		- 1.2.3 运算结果：$\frac{1}{\sqrt2}\bullet[1,1,0]$
- 1.3 加和：$W_\varphi(2,n)=\frac{1}{\sqrt2}\bullet[1,1,0]+\frac{1}{\sqrt2}\bullet[1,-1,0]=\frac{1}{\sqrt2}\bullet[2,0]$
- 2.1 $W_\psi(2,n)=[-1,-1]$，上采样，卷积 $[\frac{1}{\sqrt2},-\frac{1}{\sqrt2}]$
	- 2.1.1 上采样（偶数位补零）：$[-1,0,-1,0]$
	- 2.1.2 卷积运算：$[\frac{1}{\sqrt2},-\frac{1}{\sqrt2}]*[-1,0,-1,0]$
	- 2.1.3 运算结果：$\frac{1}{\sqrt2}\bullet[-1,1,-1,1,0]$
- 2.2 $W_\varphi(2,n)=\frac{1}{\sqrt2}\bullet[2,0]$，上采样，卷积 $[\frac{1}{\sqrt2},\frac{1}{\sqrt2}]$
	- 2.2.1 上采样（偶数位补零）：$\frac{1}{\sqrt2}\bullet[2,0,0,0]$
	- 2.2.2 卷积运算：$[\frac{1}{\sqrt2},\frac{1}{\sqrt2}]*[\frac{1}{\sqrt2}\bullet[2,0,0,0]]$
	- 2.2.3 运算结果：$[1,1,0,0,0]$
- 2.3 加和：$W_\varphi(3,n)=\frac{1}{\sqrt2}\bullet[-1,1,-1,1,0]+[1,1,0,0,0] = [1-\frac{1}{\sqrt 2}, 1+\frac{1}{\sqrt 2}, -\frac{1}{\sqrt 2}, \frac{1}{\sqrt2}]$
- 3.1 $W_\psi(3,n)=[1,0,1,0]$，上采样，卷积 $[\frac{1}{\sqrt2},-\frac{1}{\sqrt2}]$
	- 3.1.1 上采样（偶数位补零）：$[1,0,0,0,1,0,0,0]$
	- 3.1.2 卷积运算：$[\frac{1}{\sqrt2},-\frac{1}{\sqrt2}]*[1,0,0,0,1,0,0,0]$
	- 3.1.3 运算结果：$\frac{1}{\sqrt2}\bullet[1,-1,0,0,1,-1,0,0,0]$
- 3.2 $W_\varphi(3,n)=[1-\frac{1}{\sqrt 2}, 1+\frac{1}{\sqrt 2}, -\frac{1}{\sqrt 2}, \frac{1}{\sqrt2}]$，上采样，卷积 $[\frac{1}{\sqrt2},-\frac{1}{\sqrt2}]$
	- 3.2.1 上采样（偶数位补零）：$[1-\frac{1}{\sqrt 2}, 0, 1+\frac{1}{\sqrt 2}, 0, -\frac{1}{\sqrt 2}, 0, \frac{1}{\sqrt2},0]$
	- 3.2.2 卷积运算：$[\frac{1}{\sqrt2},-\frac{1}{\sqrt2}]*[1-\frac{1}{\sqrt 2}, 0, 1+\frac{1}{\sqrt 2}, 0, -\frac{1}{\sqrt 2}, 0, \frac{1}{\sqrt2},0]$
	- 3.2.3 运算结果：$[\frac{\sqrt 2-1}{2}, \frac{\sqrt 2-1}{2}, \frac{\sqrt 2+1}{2}, \frac{\sqrt 2+1}{2}, -\frac{1}{2}, -\frac{1}{2}, \frac{1}{2}, \frac{1}{2},0]$
- 3.3 加和：$W_\varphi(4,n)=\frac{1}{\sqrt2}\bullet[1,-1,0,0,1,-1,0,0,0]+[\frac{\sqrt 2-1}{2}, \frac{\sqrt 2-1}{2}, \frac{\sqrt 2+1}{2}, \frac{\sqrt 2+1}{2}, -\frac{1}{2}, -\frac{1}{2}, \frac{1}{2}, \frac{1}{2},0]$  $= [\frac{2\sqrt 2-1}{2}, \frac{-1}{2}, \frac{\sqrt 2+1}{2}, \frac{\sqrt 2+1}{2}, \frac{\sqrt 2-1}{2}, -\frac{\sqrt 2+1}{2}, \frac{1}{2}, \frac{1}{2}]$

## 尺度函数子空间和小波函数子空间的关系
在多分辨率分析（MRA）中，尺度函数子空间 $V_j$ 和小波函数子空间 $W_j$ 的关系至关重要：
### 尺度函数子空间 $V_j$
尺度函数子空间包含了信号在尺度 $2^j$ 下的近似，使用尺度函数 $\phi (t)$ 的整数平移的线性组合表示。
$$
V_j = \{ f(t) \,|\, f(t) = \sum_{k} c_k \phi(2^j t - k), c_k \in \mathbb{R} \}
$$
### 小波函数子空间 $W_j$
小波函数子空间包含了信号在尺度 $2^j$ 下的细节，使用小波函数 $\psi (t)$ 的整数平移的线性组合表示。
$$
W_j = \{ g(t) \,|\, g(t) = \sum_{k} d_k \psi(2^j t - k), d_k \in \mathbb{R} \}
$$
### 二者关系
1. **子空间嵌套**：
   $V_j$ 形成一个嵌套序列，其中每个 $V_j$ 是 $V_{j+1}$ 的子集。

   $$
   \cdots \subset V_{j-1} \subset V_j \subset V_{j+1} \subset \cdots
   $$
2. **正交补空间**：
   $W_j$ 是 $V_j$ 在 $V_{j+1}$ 中的正交补空间。即 $V_{j+1}$ 可以被分解为 $V_j$ 和 $W_j$ 的直和。

   $$
   V_{j+1} = V_j \oplus W_j
   $$
3. **完备性**：
   所有尺度函数子空间和小波函数子空间的并集构成了整个平方可积函数空间 $L^2 (\mathbb{R})$。

   $$
   \bigoplus_{j=-\infty}^{\infty} W_j = L^2(\mathbb{R})
   $$
4. **交集为零**：
   所有尺度空间的交集仅包含零函数。
   $$
   \bigcap_{j=-\infty}^{\infty} V_j = \{0\}
   $$
这种结构使得我们能够在不同的尺度上对信号进行分析，并通过结合近似和细节来重构信号。




# 频域分析
## 傅里叶变换
### 傅里叶变换定义
对于任意一维连续信号 $f(t)$，其傅里叶变换定义为：
$$ F(\omega) = \int_{-\infty}^{\infty} f(t) e^{-j\omega t} dt $$
对于一维离散信号 $f[n]$，其傅里叶变换定义为：
$$ F[k] = \frac{\sum_{n=0}^{N-1} f[n] e^{-j\frac{2\pi}{N}kn}}{N} $$
对于任意二维连续信号 $f(x, y)$，其傅里叶变换定义为：
$$ F(u, v) = \int_{-\infty}^{\infty} \int_{-\infty}^{\infty} f(x, y) e^{-j(ux + vy)} dx dy $$
### 空域平移性质
设 $f(t)$ 的傅里叶变换为 $F(\omega)$，则 $f(t - t_0)$ 的傅里叶变换为：
$$ \mathcal{F}(f(t - t_0))=F(\omega)e^{-j\omega t_0} $$
设 $f(x, y)$ 的傅里叶变换为 $F(u, v)$，则 $f(x - x_0, y - y_0)$ 的傅里叶变换为：
$$ \mathcal{F}(f(x - x_0, y - y_0))=F(u, v)e^{-j(ux_0 + vy_0)} $$
### 频域平移性质
1. 当二维信号 $f(x, y)$ 乘以一个复指数时，其傅里叶变换 $F(u, v)$ 在频域中沿 $u$ 轴和 $v$ 轴分别平移 $u_0$ 和 $v_0$ 的量。
	 $$ \mathcal{F}\left\{f(x, y)e^{j2\pi\left(\frac{u_0x}{M} + \frac{v_0y}{N}\right)}\right\} = F(u - u_0, v - v_0) $$
2. 当二维信号 $f(x, y)$ 乘以 $(-1)^{x+y}$ 时，其傅里叶变换 $F(u, v)$ 在频域中沿 $u$ 轴和 $v$ 轴分别平移 $M/2$ 和 $N/2$ 的量。
	  $$ \mathcal{F}\{f(x, y)(-1)^{x+y}\} = F\left(u - \frac{M}{2}, v - \frac{N}{2}\right) $$

这些性质是图像处理和信号处理中分析和操作频域信息的基础。
### 共轭对称性
对于实数信号 $f(t)$，其傅里叶变换 $F(\omega)$ 满足共轭对称性：
$$ F(-\omega) = F^*(\omega) $$
对于实数信号 $f(x, y)$，其傅里叶变换 $F(u, v)$ 满足共轭对称性：
$$ F(-u, -v) = F^*(u, v) $$

### 比例性质
若 $f(t)$ 的傅里叶变换为 $F(\omega)$，则 $a \cdot f(t)$ 的傅里叶变换为：
$$\mathcal{F}(a \cdot f(t))= a \cdot F(\omega) $$
### 周期性质
若 $f(t)$ 是周期为 $T$ 的周期函数，则其傅里叶变换 $F(\omega)$ 也是周期函数，周期也为 $T$。
-  $若 f(t+T)=f(t),则 F(\omega+T)=F(\omega)$
### 平均性质
平均性质指的是，二维离散信号 $f(x, y)$ 的傅里叶变换 $F(u, v)$ 在 $(0,0)$ 点的值，也就是直流分量 $F(0,0)$，等于信号 $f(x, y)$ 所有值的平均。
$$ F(0,0) = \frac{1}{MN} \sum_{x=0}^{M-1} \sum_{y=0}^{N-1} f(x, y) $$
这里，
- $F(0,0)$ 是傅里叶变换的直流分量，表示信号的平均亮度或者平均值。
- $M$ 和 $N$ 分别是图像在 $x$ 和 $y$ 方向上的大小。
- $\sum$ 符号表示对整个信号的所有像素值进行求和。

### 微分性质
1. 对于二维信号 $f(x, y)$，当我们对其进行 $n$ 阶 $x$ -方向的偏导数，其傅里叶变换将会乘以 $(j2\pi u)^n$。
   $$ \mathcal{F}\left(\frac{\partial^n f(x, y)}{\partial x^n}\right) = (j2\pi u)^n \mathcal{F}(f(x, y)) = (j2\pi u)^n F(u, v) $$

2. 类似地，如果我们将信号乘以 $(-j2\pi u)^n$，在频率域中这相当于对 $F(u, v)$ 进行 $n$ 阶 $u$ -方向的偏导数。
   $$ \mathcal{F}\left((-j2\pi u)^n f(x, y)\right) = \frac{\partial^n F(u, v)}{\partial u^n} $$

3. 最后，二维信号的拉普拉斯算子 $\nabla^2 f(x, y)$ 的傅里叶变换为原变换 $F(u, v)$ 乘以 $-4\pi^2(u^2 + v^2)$。
   $$ \mathcal{F}(\nabla^2 f(x, y)) = -4\pi^2(u^2 + v^2)F(u, v) $$

### 卷积定理
对于两个二维函数 $f(x, y)$ 和 $g(x, y)$，它们的卷积定义为：
$$ (f * g)(x, y) = \int_{-\infty}^{\infty} \int_{-\infty}^{\infty} f(\tau, \sigma) g(x - \tau, y - \sigma) d\tau d\sigma $$
其傅里叶变换为：
$$ \mathcal{F} ((f * g)(x, y))=F(u, v)\bullet G(u, v) $$
$$ \mathcal{F} ((f \bullet g)(x, y))=F(u, v) * G(u, v) $$
## 原点中心对称
当然可以。使用频率平移性质和共轭对称性，我们可以推导如何利用离散傅里叶变换（DFT）实现二维图像 $f(x, y)$ 关于原点的对称变换。以下是详细的推导步骤：
1. 先对原始图像应用 $(-1)^{x+y}$，然后计算其 DFT：
   $$ F'(u, v) = \mathcal{F}\{f(x, y) \cdot (-1)^{x+y}\} = F\left(u - \frac{M}{2}, v - \frac{N}{2}\right) $$

2. 然后对 $F'(u, v)$ 取共轭：
   $$ F'^*(u, v) = F^*\left(u - \frac{M}{2}, v - \frac{N}{2}\right)= F\left(\frac{M}{2}-u, \frac{N}{2}-v\right) $$

3. 最后，对 $F'^*(u, v)$ 进行逆 DFT，并乘以 $(-1)^{x+y}$，以得到关于原点对称的图像 $f_{\text{sym}}(x, y)$：
$$ f_{\text{sym}}(x, y) = \mathcal{F}^{-1}\left\{F^*\left(u - \frac{M}{2}, v - \frac{N}{2}\right)\right\} \cdot (-1)^{x+y} $$
   $$ f_{\text{sym}}(x, y) = \mathcal{F}^{-1}\{F\left(\frac{M}{2}-u, \frac{N}{2}-v\right)\} \cdot (-1)^{x+y} = f(-x, -y)$$
- 这个过程实际上是将图像在空间域中关于原点进行了对称变换，因此最终结果是 $f_{\text{sym}}(x, y) = f(-x, -y)$。
## 由均匀分布随机数发生器构造指数分布随机数发生器，推导随机数方程
### 1. 构造指数分布随机数发生器
要通过均匀分布随机数发生器构造指数分布随机数发生器，我们使用逆变换采样方法。指数分布的累积分布函数（CDF）为：

$$ F(x; \lambda) = 1 - e^{-\lambda x} $$

其中，$x \geq 0$ 且 $\lambda > 0$。给定 $U \sim \text{Uniform}(0, 1)$，我们需要找到一个 $X$ 使得 $F(X; \lambda) = U$。通过以下步骤解这个方程：

1. 将 CDF 的等式写为 $U = 1 - e^{-\lambda X}$。
2. 重新排列等式得到 $e^{-\lambda X} = 1 - U$。
3. 对两边取自然对数，得到 $-\lambda X = \ln(1 - U)$。
4. 解出 $X$，得到 $X = -\frac{1}{\lambda} \ln(1 - U)$。

因此，指数分布随机数发生器的方程为：

$$ X = -\frac{1}{\lambda} \ln(1 - U) $$
其中，$U$ 是从均匀分布 $\text{Uniform}(0, 1)$ 中抽取的随机数。
### 2. 生成对数正态分布的随机数

假设我们有一个标准正态分布的随机数发生器 $X \sim N(0, 1)$，对数正态分布的随机数生成方程可以通过以下步骤得到：
令对数正态分布为 $ln Y = Z \sim N(\mu, \sigma^2)$，则有 $Y = e^Z$，且 $Z = \sigma X + \mu$。因此，对数正态分布的随机数生成方程为：
$$ Y = e^{\sigma X + \mu} $$

## 频域内高通和低通滤波器
1. **低通滤波器 (LPF)**：低通滤波器允许低频信号通过，而阻止或减弱高频信号的通过。在图像处理中，低通滤波器有助于去除噪声、平滑图像，因为高频通常与图像的细节和噪声相关。
2. **高通滤波器 (HPF)**：高通滤波器允许高频信号通过，而阻止或减弱低频信号的通过。在图像处理中，高通滤波器有助于强调图像中的边缘和细节。
$$ H_{\text{hp}}(u, v) = 1 - H_{\text{lp}}(u, v) $$
## 巴特沃斯滤波器
- 低通巴特沃斯滤波器在高阶时，存在振铃效应；
- 低通高斯滤波器非负，非震荡，并不存在振铃。
### 低通巴特沃斯滤波器
低通巴特沃斯滤波器的传递函数为：

$$ H_{\text{lp}}(u, v) = \frac{1}{1 + \left(\frac{D(u, v)}{D_0}\right)^{2n}} $$
- $D(u, v)$ 是频率域中点 $(u, v)$ 到频率响应中心的距离。
- $D_0$ 是截止频率。
- $n$ 是滤波器的阶数。
### 截止频率
在巴特沃斯滤波器中，$D_0$（截止频率）是一个非常重要的参数，它对滤波器的性能有显著影响：
1. **对低通滤波器的影响**：在低通巴特沃斯滤波器中，$D_0$ 决定了**允许通过的最高频率**。增加 $D_0$ 会导致滤波器允许更多的高频分量通过，从而使图像看起来更清晰，但可能会引入更多噪声。**减小 $D_0$ 会减少通过的高频分量，从而使图像更平滑，但细节可能会丢失**。
### 低通巴特沃斯滤波器在高阶时，存在振铃效应
## 高斯滤波器
高斯滤波器是一种应用广泛的图像处理滤波器，以其在空间域内具有高斯形状的权重分布而得名。这种滤波器特别适用于图像去噪和平滑处理，因为其权重分布能有效地抑制图像中的高频噪声，同时保持图像的整体平滑度。

### 高斯滤波器的数学表达
低通高斯滤波器是一种在频域内具有高斯形状的滤波器，用于平滑图像并减少高频噪声。低通高斯滤波器的传递函数通常表达为：

$$ H_{\text{lp}}(u, v) = e^{-\frac{D^2(u, v)}{2D_0^2}} $$

其中：
- $H_{\text{lp}}(u, v)$ 是低通高斯滤波器在频域中的传递函数。
- $D(u, v)$ 是频率域中的点 $(u, v)$ 到频率平面中心的距离。
- $D_0$ 是截止频率，控制滤波器的宽度，即决定了滤波器允许通过的频率范围。
总的来说，$D_0$ 较大会导致滤波效果较弱，图像较清晰；$D_0$ 较小则会导致滤波效果较强，图像较模糊。因此，调节 $D_0$ 可以控制图像的模糊程度。
# 图像复原
## 退化和恢复：
### **退化过程**：
原始图像 $f(x, y)$ 经过一个退化函数 $H$，再叠加噪声 $\eta(x, y)$，得到退化后的图像 $g(x, y)$。这个过程可以在空间域和频率域中表示：
- 在空间域的表示：
  $$ g(x, y) = h(x, y) * f(x, y) + \eta(x, y) $$
  其中 $h(x, y)$ 是退化函数 $H$ 的空间表示，$*$ 表示卷积操作。
- 在频率域的表示：
  $$ G(u, v) = H(u, v) \cdot F(u, v) + N(u, v) $$
  其中 $G(u, v)$、$F(u, v)$、和 $N(u, v)$ 分别是 $g(x, y)$、$f(x, y)$、和 $\eta(x, y)$ 的傅里叶变换。
### **恢复过程**：
在图像恢复阶段，退化图像 $g(x, y)$ 通过恢复滤波器处理，以估计出原始图像 $\hat{f}(x, y)$。恢复滤波器的目标是逆转退化函数的影响，并减少噪声带来的影响。
## 维纳滤波
在图像处理中，维纳滤波是一种用于图像去噪和恢复的线性滤波方法。它旨在通过最小化估计的图像和未知的原始图像之间的均方误差来找到最优解。根据您上传的公式，维纳滤波的频域表达式是：
$$ \hat{F}(u, v) = \left[\frac{1}{H(u, v)} \frac{|H(u, v)|^2}{|H(u, v)|^2 + S_n(u, v) / S_f(u, v)}\right] G(u, v) $$
这里：
- $\hat{F}(u, v)$ 是估计的原始图像的频域表示。
- $H(u, v)$ 是退化系统（例如，模糊或运动）的频域传递函数。
- $|H(u, v)|^2$ 是传递函数的模的平方，表示信号通过系统的能量损失。
- $G(u, v)$ 是观察到的退化图像的频域表示。
- $S_n(u, v)$ 和 $S_f(u, v)$ 分别是噪声和原始图像的功率谱密度。
## 均值滤波器
均值滤波器是图像处理中用于图像平滑和去噪的一种简单滤波器。它通过对图像中每个像素的邻域内的像素值进行平均来工作。存在几种不同类型的均值滤波器，包括算术平均滤波器、几何平均滤波器、调和平均滤波器和反调和平均滤波器。
### 算术平均滤波器
算术平均滤波器使用邻域内所有像素的算术平均值来替换中心像素的值。对于一个大小为 $m \times n$ 的邻域，算术平均滤波器的输出为：
$$ f_{\text{arithmetic}}(x, y) = \frac{1}{mn} \sum_{s=-a}^{a} \sum_{t=-b}^{b} g(x+s, y+t) $$

其中 $g(x, y)$ 是图像的输入像素值。
### 几何平均滤波器
几何平均滤波器使用邻域内所有像素的几何平均值来替换中心像素的值。几何平均滤波器的输出为：

$$ f_{\text{geometric}}(x, y) = \left[ \prod_{s=-a}^{a} \prod_{t=-b}^{b} g(x+s, y+t) \right]^{\frac{1}{mn}} $$
### 调和平均滤波器
调和平均滤波器是算术平均滤波器的倒数的算术平均值的倒数。调和平均滤波器的输出为：

$$ f_{\text{harmonic}}(x, y) = \frac{mn}{\sum_{s=-a}^{a} \sum_{t=-b}^{b} \frac{1}{g(x+s, y+t)}} $$
### 反调和平均滤波器
反调和平均滤波器是一种更复杂的滤波器，它基于像素值的次方的算术平均值的比率。这对于处理像素值为零的情况特别有用，并且可以根据次方的正负来实现滤波器的变化。反调和平均滤波器的输出定义为：
$$ f_{\text{contraharmonic}}(x, y) = \frac{\sum_{s=-a}^{a} \sum_{t=-b}^{b} g(x+s, y+t)^{Q+1}}{\sum_{s=-a}^{a} \sum_{t=-b}^{b} g(x+s, y+t)^{Q}} $$
其中 $Q$ 是滤波器的阶数，它可以是正数或负数。当 $Q$ 为正时，反调和平均滤波器对于消除像素值较小的噪声（如椒噪声）特别有效；而当 $Q$ 为负时，它可以有效地消除像素值较大的噪声（如盐噪声）。Q 为 0 为算数平均，Q 为-1，调和平均。
反调和平均滤波器可以根据 $Q$ 的值调整其对图像的影响，因此提供了一种相对灵活的去噪方法。在实际应用中，选择合适的 $Q$ 值是很重要的，因为不正确的选择可能会增强噪声而不是减少它。
## 各种滤波
### 中值滤波器（Median Filter）
中值滤波器通过选择像素邻域内的中位数来替换该像素的值。对于一个大小为 $m \times n$ 的邻域，中值滤波器的输出表示为：
$$ f_{\text{median}}(x, y) = \text{median}\{g(x+k, y+l)\} \quad \forall k, l \in \text{邻域} $$
### 最大值滤波器（Max Filter）
最大值滤波器在图像的每个像素的邻域内选择最大值作为输出。这可以用来突出亮区域或进行形态学运算。
$$ f_{\text{max}}(x, y) = \max\{g(x+k, y+l)\} \quad \forall k, l \in \text{邻域} $$
### 最小值滤波器（Min Filter）
最小值滤波器在图像的每个像素的邻域内选择最小值作为输出。这可以用来突出暗区域或进行形态学运算。
$$ f_{\text{min}}(x, y) = \min\{g(x+k, y+l)\} \quad \forall k, l \in \text{邻域} $$
### 修正阿尔法均值滤波器（Alpha-trimmed Mean Filter）
修正阿尔法均值滤波器在计算邻域像素的均值时去除了最高和最低的 $\alpha$ 个像素值，以抵抗极端值的影响。
$$ f_{\text{alpha-trimmed}}(x, y) = \frac{1}{mn - 2\alpha} \sum_{k,l \in \text{邻域}, \text{excluding }\alpha \text{ extremes}} g(x+k, y+l) $$
### 自适应中值滤波器（Adaptive Median Filter）
自适应中值滤波器根据邻域内像素值的变化动态调整邻域的大小，以更好地处理不同程度的噪声。
$$ f_{\text{adaptive-median}}(x, y) = \text{median}\{g(x+k, y+l)\} \quad \forall k, l \in \text{动态邻域} $$
### 自适应均值滤波器（Adaptive Mean Filter）
自适应均值滤波器根据局部区域的统计特性来调整像素值，以便在平滑噪声的同时保留图像细节。
$$ f_{\text{adaptive-mean}}(x, y) = \mu_{\text{local}} + \frac{\sigma^2_{\text{noise}}}{\sigma^2_{\text{local}}} \left(g(x, y) - \mu_{\text{local}}\right) $$
其中 $\mu_{\text{local}}$ 和 $\sigma^2_{\text{local}}$ 分别是像素 $(x, y)$ 的局部邻域的均值和方差，而 $\sigma^2_{\text{noise}}$ 是噪声的方差。

# 彩色图像
## 颜色空间
### RGB 颜色空间
RGB 是由三个通道表示一幅图像，分别为红色（R），绿色（G）和蓝色（B）。这三种颜色的不同组合可以形成几乎所有的其他颜色。RGB 颜色空间是图像处理中最基本、最常用、面向硬件的颜色空间。

### XYZ 颜色空间
XYZ 是由三个通道表示一幅图像，分别为 X、Y 和 Z，它们分别代表了颜色中红色、绿色和蓝色的比例，以及颜色的亮度。X 和 Z 通道只代表色度，没有亮度，Y 通道既可以代表亮度，也可以代表色度。三个通道的单位都是流明每平方米（lm/m^2）。XYZ 颜色空间是一种设备无关的色彩空间，它不受任何特定设备的呈现能力的限制，它可以表示人眼能够感知的所有颜色。

$$
X = \frac{R}{R + G + B}, \quad Y = \frac{G}{R + G + B}, \quad Z = \frac{B}{R + G + B}, \quad X + Y + Z = 1
$$

### NTSC 颜色空间
NTSC 是由三个通道表示一幅图像，分别为亮度（Y），色度（I）和色度（Q）。亮度通道表示图像的明暗程度，色度通道表示图像的色彩信息。NTSC 颜色空间是一种模拟电视制式，主要用于美国、日本等国家的电视广播。

$$
\begin{bmatrix}
Y \\
I \\
Q
\end{bmatrix}
=
\begin{bmatrix}
0.299 & 0.587 & 0.114 \\
0.596 & -0.274 & -0.322 \\
0.211 & -0.523 & 0.312
\end{bmatrix}
\begin{bmatrix}
R \\
G \\
B
\end{bmatrix}
$$

### YCbCr 颜色空间
YCbCr 是由三个通道表示一幅图像，分别为亮度（Y），蓝色差（Cb）和红色差（Cr）。亮度通道表示图像的明暗程度，蓝色差和红色差通道表示图像的色彩信息。YCbCr 颜色空间是一种数字电视制式，主要用于 JPEG、MPEG 等图像和视频压缩标准。

$$
\begin{bmatrix}
Y \\
Cb \\
Cr
\end{bmatrix}
=
\begin{bmatrix}
16 \\
128 \\
128
\end{bmatrix}
+
\begin{bmatrix}
65.481 & 128.553 & 24.966 \\
-37.797 & -74.203 & 112.000 \\
112.000 & -93.786 & -18.214
\end{bmatrix}
\begin{bmatrix}
R \\
G \\
B
\end{bmatrix}
/256 \text{ (approximately)}
$$

### HSV 颜色空间
HSV 是由三个通道表示一幅图像，分别为色调（H），饱和度（S）和明度（V）。色调通道表示图像的色彩信息，即所处的光谱颜色的位置。饱和度通道表示图像的色彩纯净度，即颜色接近光谱色的程度。明度通道表示图像的明暗程度，即颜色的亮度。HSV 颜色空间比 RGB 更接近人们对彩色的感知经验，非常直观地表达颜色的特征，方便进行颜色的对比和分割。

### HSI 颜色空间
HSI 是由三个通道表示一幅图像，分别为色调（H），饱和度（S）和强度（I）。色调通道表示图像的色彩信息，即所处的光谱颜色的位置。强度通道表示图像的亮度信息，即颜色的平均亮度。饱和度通道表示图像的色彩纯净度，即颜色接近光谱色的程度。HSI 颜色空间与 HSV 颜色空间类似，但是强度通道与亮度通道的计算方法不同，强度通道是 RGB 三个通道的平均值，而亮度通道是 RGB 三个通道的最大值。

$$
\text{If } B \leq G: H = \theta, \quad \text{If } B > G: H = 360 - \theta
$$

$$
\theta = \cos^{-1} \left\{ \frac{1}{2} \left[ (R - G) + (R - B) \right] / \sqrt{(R - G)^2 + (R - B)(G - B)} \right\}
$$

$$
S = 1 - \frac{3}{(R + G + B)} \min(R, G, B)
$$

$$
I = \frac{1}{3} (R + G + B)
$$

### CMY 颜色空间
CMY 是由三个通道表示一幅图像，分别为青色（C），品红（M）和黄色（Y）。这三种颜色的不同组合可以形成几乎所有的其他颜色。CMY 颜色空间是一种减色模式，主要用于印刷领域，它是 RGB 颜色空间的补色。

$$
\begin{bmatrix}
C \\
M \\
Y
\end{bmatrix}
=
\begin{bmatrix}
1 \\
1 \\
1
\end{bmatrix}
-
\begin{bmatrix}
R \\
G \\
B
\end{bmatrix}
$$

### CMYK 颜色空间
CMYK 是由四个通道表示一幅图像，分别为青色（C），品红（M），黄色（Y）和黑色（K）。这四种颜色的不同组合可以形成几乎所有的其他颜色。CMYK 颜色空间是一种减色模式，主要用于印刷领域，它是在 CMY 颜色空间的基础上增加了黑色通道，以提高对比度和节省油墨。

## 马氏距离，欧式距离
### 欧式距离

欧式距离是最常用的距离度量，它是两个点在多维空间内的实际直线距离。对于点 $P_1$ 和点 $P_2$，其中 $P_1=(x_{1}, y_{1}, z_{1}, \ldots)$，$P_2=(x_{2}, y_{2}, z_{2}, \ldots)$，二者在 $n$ 维空间中的欧式距离 $d$ 定义为：

$$ d(P_1, P_2) = \sqrt{(x_2 - x_1)^2 + (y_2 - y_1)^2 + (z_2 - z_1)^2 + \ldots} $$
在二维空间中，这就是根据勾股定理计算两点间的直线距离。
### 马氏距离
马氏距离考虑了数据的协方差，用于量度一个点到一个分布的中心的距离，不受量纲影响，能够有效地度量具有不同单位的数据点的相似度。对于一个点 $P(x_{1}, x_{2}, \ldots, x_{n})$ 和一个分布的均值 $\mu(\mu_{1}, \mu_{2}, \ldots, \mu_{n})$，以及该分布的协方差矩阵 $S$，马氏距离 $D_M$ 定义为：
$$ D_M(P, \mu) = \sqrt{(P - \mu)^T S^{-1} (P - \mu)} $$
如果协方差矩阵是单位矩阵，马氏距离退化为欧式距离。
马氏距离的一个关键特性是它考虑了数据特征之间的相关性。例如，在有两个特征的数据集中，如果这两个特征是高度相关的，那么这两个特征不应该被简单地看作是独立的，计算距离时需要考虑这种关系。马氏距离通过协方差矩阵来调整各特征间的尺度，以此来反映这种关系。
# 图像压缩
### 编码冗余
编码冗余指的是在表示信息时使用的比特数超过了传递信息所必需的最小比特数。这种冗余可以用于错误检测和校正，但也会增加数据的大小。
### 像素间冗余
像素间冗余是指图像中相邻像素之间的相关性。由于相邻像素通常具有相似的颜色和亮度，因此它们不是完全独立的，这导致了数据的冗余。
### 心理视觉冗余
心理视觉冗余是基于人类视觉系统的特性，它无法感知图像中所有的信息。因此，图像中对人眼不重要或不可感知的信息部分可以被认为是冗余的，并且可以在压缩时被去除。
### 自信息
自信息量度一个特定事件发生时所带来的信息量。对于一个事件 $x$，自信息定义为：
$$ I(x) = -\log(P(x)) $$
其中 $P(x)$ 是事件 $x$ 发生的概率，通常以比特为单位。
### 信源熵
信源熵（或简称为熵）是信源平均信息量的度量，它提供了信源最小编码长度的下限。对于一个离散信源，熵 $H(X)$ 定义为：
$$ H(X) = -\sum_{i} P(x_i) \log(P(x_i)) $$
其中 $P(x_i)$ 是信源的第 $i$ 个符号的概率。
### 条件熵
条件熵 $H(Y|X)$ 量度在已知随机变量 $X$ 的情况下，随机变量 $Y$ 的不确定性。它定义为：
$$ H(Y|X) = -\sum_{x \in X} P(x) \sum_{y \in Y} P(y|x) \log(P(y|x)) $$
### 互信息
互信息量度两个随机变量之间的相互依赖性，也就是知道一个变量的信息减少了对另一个变量不确定性的量。它定义为：
$$ I(X;Y) = \sum_{y \in Y} \sum_{x \in X} P(x,y) \log\left(\frac{P(x,y)}{P(x)P(y)}\right) $$
### 信道容量
信道容量是信道最大信息传输速率的度量，在没有误差的情况下，它定义了信道能够传输的最大信息量。它是信道互信息的最大值，定义为：
$$ C = \max_{P(x)} I(X;Y) $$
### 信源编码
信源编码是指将信源数据转换为适合传输或存储的形式的过程。其目标是去除信源冗余，实现数据压缩，而不增加错误。
### 信道编码
信道编码是增加附加数据（如校验位）到信源编码数据的过程，以便在信道传输过程中能够检测或校正错误。其目标是增加编码冗余来对抗信道噪声和干扰。